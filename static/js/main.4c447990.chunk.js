(this["webpackJsonppizza-delivery"]=this["webpackJsonppizza-delivery"]||[]).push([[0],{57:function(e,t,a){e.exports=a(70)},64:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),l=a(18),i=a(32),s=a(38),u=a(15),m={RUB:{name:"RUB",sign:"\u20bd"},USD:{name:"USD",sign:"$"},EUR:{name:"EUR",sign:"\u20ac"}},d={catalogue:[],currency:m.USD,user:null,delivery_cost:{},order:[]};function p(e,t){var a=t.type,n=t.payload;switch(a){case"SET_CATALOGUE":return Object(u.a)(Object(u.a)({},e),{},{catalogue:n});case"ADD_TO_ORDER":var r=Object(s.a)(e.order),c=n.pizza_id,o=n.price_RUB,l=n.price_USD,i=n.price_EUR;return r.push({pizza_id:c,count:1,price_RUB:o,price_USD:l,price_EUR:i}),Object(u.a)(Object(u.a)({},e),{},{order:r});case"REMOVE_FROM_ORDER":var m=Object(s.a)(e.order).filter((function(e){return e.pizza_id!==n}));return Object(u.a)(Object(u.a)({},e),{},{order:m});case"UPDATE_CURRENCY":return Object(u.a)(Object(u.a)({},e),{},{currency:n});default:return e}}var E=Object(n.createContext)();function b(e){var t=e.children,a=Object(n.useReducer)(p,d),c=Object(i.a)(a,2),o=c[0],l=c[1];return r.a.createElement(E.Provider,{value:{state:o,dispatch:l}},t)}var f=a(101),h=a(50),y=a(47),v=a.n(y),g=a(48),O=a.n(g),R=Object(h.a)({palette:{primary:{main:v.a[500],contrastText:"#ffffff"},secondary:{main:O.a.A400}}}),U=(a(64),a(8)),_=a(91),j=a(92),z=a(33),D=a(93),C=a(94),S=a(95),x=a(31),T=a.n(x),w=a(89),B=a(102),k=a(90),A=Object(w.a)((function(e){return{root:{background:"inherit",borderColor:e.palette.secondary.main,color:e.palette.primary.contrastText,"&$selected":{backgroundColor:e.palette.secondary.main,color:e.palette.primary.main,fontWeight:"bold"}},label:{color:e.palette.primary.contrastText},selected:{}}}));var P=function(){var e=Object(n.useContext)(E),t=e.state,a=e.dispatch,c=t.currency,o=Object(n.useState)(c.name),l=Object(i.a)(o,2),s=l[0],u=l[1],d=A();return r.a.createElement(B.a,{size:"small",exclusive:!0,"aria-label":"select currency",name:"currency",value:s,onChange:function(e,t){null!==t&&(u(t),a({type:"UPDATE_CURRENCY",payload:m[t]}))}},r.a.createElement(k.a,{classes:{root:d.root,label:d.label,selected:d.selected},value:m.RUB.name,"aria-label":m.RUB.name},m.RUB.name),r.a.createElement(k.a,{classes:{root:d.root,label:d.label,selected:d.selected},value:m.USD.name,"aria-label":m.USD.name},m.USD.name),r.a.createElement(k.a,{classes:{root:d.root,label:d.label,selected:d.selected},value:m.EUR.name,"aria-label":m.EUR.name},m.EUR.name))};var F=function(){var e=Object(n.useContext)(E).state,t=0===e.order.length?0:e.order.map((function(e){return e.count})).reduce((function(e,t){return e+t}));return r.a.createElement(_.a,{position:"static"},r.a.createElement(j.a,null,r.a.createElement(l.b,{to:"/",style:{color:"inherit",flexGrow:1,textDecoration:"none"}},r.a.createElement(z.a,{variant:"h6",style:{}},"Pizza Delivery")),r.a.createElement(P,null),r.a.createElement(D.a,{color:"inherit"},"Login"),r.a.createElement(l.b,{to:"/cart",style:{color:"inherit"}},r.a.createElement(C.a,{edge:"end",color:"inherit","aria-label":"go to cart"},r.a.createElement(S.a,{badgeContent:t,color:"secondary"},r.a.createElement(T.a,null))))))},M="https://my-json-server.typicode.com/tereshka/pizza-delivery",W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){fetch(e,t).then((function(e){if(e.status<400)return e.json();throw e})).then((function(e){a(e)})).catch((function(e){e.json().then((function(e){n(e)}))}))}))},G={get:function(e){return W("".concat(M).concat(e),{mode:"cors",credentials:"include",headers:{"Content-type":"application/json"}})},post:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return W("".concat(M).concat(e),{method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(t)})}},J=a(100),L=a(96),N=a(97),$=a(98),V=a(99),Y=a(49),I=a.n(Y);var q=function(e){var t=Object(n.useContext)(E),a=t.state,c=t.dispatch,o=a.currency,l=a.order,i=e.pizza,s=i.id,u=i.name,d=i.description,p=i.image,b=i.ingredients,f=i.price_RUB,h=i.price_USD,y=i.price_EUR,v=o===m.RUB?f:o===m.USD?h:y;function g(){c({type:"ADD_TO_ORDER",payload:{pizza_id:s,price_RUB:f,price_USD:h,price_EUR:y}})}function O(){c({type:"REMOVE_FROM_ORDER",payload:s})}return r.a.createElement(L.a,null,r.a.createElement(N.a,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{variant:"h6",style:{fontWeight:"bold"},component:"span"},"".concat(u,", ")),r.a.createElement(z.a,{variant:"h6",color:"primary",component:"span"},"".concat(v).concat(o.sign))),subheader:d,action:l.find((function(e){return e.pizza_id===s}))?r.a.createElement(C.a,{"aria-label":"remove from cart",onClick:O},r.a.createElement(I.a,{color:"primary"})):r.a.createElement(C.a,{"aria-label":"add to cart",onClick:g},r.a.createElement(T.a,null))}),r.a.createElement($.a,{style:{paddingTop:"50%"},image:p,title:u}),r.a.createElement(V.a,null,r.a.createElement(z.a,{variant:"body2",color:"textSecondary",component:"p"},b)))};var H=function(){var e=Object(n.useContext)(E),t=e.state,a=e.dispatch,c=t.catalogue;return Object(n.useEffect)((function(){0===c.length&&G.get("/pizza_list").then((function(e){a({type:"SET_CATALOGUE",payload:e})}))}),[]),r.a.createElement(J.a,{container:!0,spacing:3},c.map((function(e){return r.a.createElement(J.a,{key:"pizza-".concat(e.id),item:!0,xs:12,sm:6,md:4,lg:3},r.a.createElement(q,{pizza:e}))})))};a(69);var K=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null),r.a.createElement(U.c,null,r.a.createElement(U.a,{exact:!0,path:"/"},r.a.createElement(H,null)),r.a.createElement(U.a,{path:"/cart"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(b,null,r.a.createElement(l.a,{basename:"/"},r.a.createElement(f.a,{theme:R},r.a.createElement(K,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[57,1,2]]]);
//# sourceMappingURL=main.4c447990.chunk.js.map