(this["webpackJsonppizza-delivery"]=this["webpackJsonppizza-delivery"]||[]).push([[0],{67:function(e,t,a){e.exports=a(80)},74:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),o=a.n(c),l=a(25),i=a(21),s=a(31),u=a(10),m={RUB:{name:"RUB",sign:"\u20bd"},USD:{name:"USD",sign:"$"},EUR:{name:"EUR",sign:"\u20ac"}},d={isLoading:!1,catalogue:[],currency:m.USD,deliveryCost:void 0,user:null,order:JSON.parse(localStorage.getItem("order"))||[]};function E(e,t){var a=t.type,n=t.payload;switch(a){case"IS_LOADING":return Object(u.a)(Object(u.a)({},e),{},{isLoading:n});case"SET_DELIVERY_COST":return Object(u.a)(Object(u.a)({},e),{},{deliveryCost:n});case"SET_CATALOGUE":return Object(u.a)(Object(u.a)({},e),{},{catalogue:n});case"ADD_TO_ORDER":var r=Object(s.a)(e.order),c=n.pizza_id,o=n.price_RUB,l=n.price_USD,i=n.price_EUR;return r.push({pizza_id:c,count:1,price_RUB:o,price_USD:l,price_EUR:i}),localStorage.setItem("order",JSON.stringify(r)),Object(u.a)(Object(u.a)({},e),{},{order:r});case"REMOVE_FROM_ORDER":var m=Object(s.a)(e.order).filter((function(e){return e.pizza_id!==n}));return localStorage.setItem("order",JSON.stringify(m)),Object(u.a)(Object(u.a)({},e),{},{order:m});case"UPDATE_CURRENCY":return Object(u.a)(Object(u.a)({},e),{},{currency:n});case"RISE_COUNT":var d=Object(s.a)(e.order);return d.find((function(e){return e.pizza_id===n})).count++,Object(u.a)(Object(u.a)({},e),{},{order:d});case"DECREASE_COUNT":var E=Object(s.a)(e.order),p=E.find((function(e){return e.pizza_id===n}));return p.count>0&&p.count--,Object(u.a)(Object(u.a)({},e),{},{order:E});default:return e}}var p=Object(n.createContext)();function v(e){var t=e.children,a=Object(n.useReducer)(E,d),c=Object(i.a)(a,2),o=c[0],l=c[1];return r.a.createElement(p.Provider,{value:{state:o,dispatch:l}},t)}var y=a(114),f=a(59),b=a(55),g=a.n(b),h=a(56),O=a.n(h),R=Object(f.a)({spacing:8,palette:{primary:{main:g.a[500],contrastText:"#ffffff"},secondary:{main:O.a.A400}}}),U=(a(74),a(8)),_="https://my-json-server.typicode.com/tereshka/pizza-delivery",j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){fetch(e,t).then((function(e){if(e.status<400)return e.json();throw e})).then((function(e){a(e)})).catch((function(e){e.json().then((function(e){n(e)}))}))}))},C={get:function(e){return j("".concat(_).concat(e),{mode:"cors",credentials:"include",headers:{"Content-type":"application/json"}})},post:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return j("".concat(_).concat(e),{method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(t)})}},S=a(115),D=a(119),z=a(101),x=a(102),k=a(39),T=a(83),N=a(103),w=a(104),B=a(38),I=a.n(B),A=a(99),L=a(120),F=a(100),G=Object(A.a)((function(e){return{root:{background:"inherit",borderColor:e.palette.secondary.main,color:e.palette.primary.contrastText,"&$selected":{backgroundColor:e.palette.secondary.main,color:e.palette.primary.main,fontWeight:"bold"}},label:{color:e.palette.primary.contrastText},selected:{}}}));var M=function(){var e=Object(n.useContext)(p),t=e.state,a=e.dispatch,c=t.currency,o=Object(n.useState)(c.name),l=Object(i.a)(o,2),s=l[0],u=l[1],d=G();return r.a.createElement(L.a,{size:"small",exclusive:!0,"aria-label":"select currency",name:"currency",value:s,onChange:function(e,t){null!==t&&(u(t),a({type:"UPDATE_CURRENCY",payload:m[t]}))}},r.a.createElement(F.a,{classes:{root:d.root,label:d.label,selected:d.selected},value:m.RUB.name,"aria-label":m.RUB.name},m.RUB.name),r.a.createElement(F.a,{classes:{root:d.root,label:d.label,selected:d.selected},value:m.USD.name,"aria-label":m.USD.name},m.USD.name),r.a.createElement(F.a,{classes:{root:d.root,label:d.label,selected:d.selected},value:m.EUR.name,"aria-label":m.EUR.name},m.EUR.name))};var J=function(){var e=Object(n.useContext)(p).state,t=0===e.order.length?0:e.order.map((function(e){return e.count})).reduce((function(e,t){return e+t}));return r.a.createElement(z.a,{position:"static"},r.a.createElement(x.a,null,r.a.createElement(l.b,{to:"/",style:{color:"inherit",flexGrow:1,textDecoration:"none"}},r.a.createElement(k.a,{variant:"h6",style:{}},"Pizza Delivery")),r.a.createElement(M,null),r.a.createElement(T.a,{color:"inherit"},"Login"),r.a.createElement(l.b,{to:"/cart",style:{color:"inherit"}},r.a.createElement(N.a,{edge:"end",color:"inherit","aria-label":"go to cart"},r.a.createElement(w.a,{badgeContent:t,color:"secondary"},r.a.createElement(I.a,null))))))},P=a(109),V=a(105),W=a(106),Y=a(107),$=a(108),q=a(57),H=a.n(q);var K=function(e){var t=Object(n.useContext)(p),a=t.state,c=t.dispatch,o=a.currency,l=a.order,i=e.pizza,s=i.id,u=i.name,d=i.description,E=i.image,v=i.ingredients,y=i.price_RUB,f=i.price_USD,b=i.price_EUR,g=o===m.RUB?y:o===m.USD?f:b;function h(){c({type:"ADD_TO_ORDER",payload:{pizza_id:s,price_RUB:y,price_USD:f,price_EUR:b}})}function O(){c({type:"REMOVE_FROM_ORDER",payload:s})}return r.a.createElement(V.a,null,r.a.createElement(W.a,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{variant:"h6",style:{fontWeight:"bold"},component:"span"},"".concat(u,", ")),r.a.createElement(k.a,{variant:"h6",color:"primary",component:"span"},"".concat(g).concat(o.sign))),subheader:d,action:l.find((function(e){return e.pizza_id===s}))?r.a.createElement(N.a,{"aria-label":"remove from cart",onClick:O},r.a.createElement(H.a,{color:"primary"})):r.a.createElement(N.a,{"aria-label":"add to cart",onClick:h},r.a.createElement(I.a,null))}),r.a.createElement(Y.a,{style:{paddingTop:"50%"},image:E,title:u}),r.a.createElement($.a,null,r.a.createElement(k.a,{variant:"body2",color:"textSecondary",component:"p"},v)))};var Q=function(){var e=Object(n.useContext)(p).state.catalogue;return r.a.createElement(S.a,{m:3},r.a.createElement(P.a,{container:!0,spacing:3},e.map((function(e){return r.a.createElement(P.a,{key:"pizza-".concat(e.id),item:!0,xs:12,sm:6,md:4,lg:3},r.a.createElement(K,{pizza:e}))}))))},X=a(118),Z=a(113),ee=a(116),te=a(112),ae=a(111),ne=a(110),re=a(58),ce=a.n(re),oe=Object(A.a)((function(e){return{image:{width:"100%",height:"100%"},buttonCounter:{pointerEvents:"none"}}}));var le=function(e){var t=Object(n.useContext)(p),a=t.state,c=t.dispatch,o=a.catalogue,l=a.currency,i=e.order,s=i.pizza_id,u=i.count,d=i.price_RUB,E=i.price_USD,v=i.price_EUR,y=o.find((function(e){return e.id===s})),f=y.name,b=y.image,g=y.description,h=l===m.RUB?d:l===m.USD?E:v,O=oe();return r.a.createElement(P.a,{container:!0,alignItems:"center",m:3},r.a.createElement(P.a,{item:!0,xs:2,sm:2,md:2,lg:2},r.a.createElement("img",{alt:f,src:b,className:O.image})),r.a.createElement(P.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0},r.a.createElement(k.a,{variant:"h6",style:{}},f),r.a.createElement(k.a,{variant:"body1",style:{}},g)),r.a.createElement(P.a,{item:!0,xs:2,sm:2,md:2,lg:2},r.a.createElement(ne.a,{size:"large",color:"primary","aria-label":"outlined primary button group"},r.a.createElement(T.a,{variant:"outlined",onClick:function(){c({type:"DECREASE_COUNT",payload:s})}},"-"),r.a.createElement(T.a,{variant:"outlined",className:O.buttonCounter},u),r.a.createElement(T.a,{variant:"outlined",onClick:function(){c({type:"RISE_COUNT",payload:s})}},"+"))),r.a.createElement(P.a,{item:!0,xs:1,sm:1,md:1,lg:1},r.a.createElement(k.a,{variant:"h6",style:{}},"".concat((h*u).toFixed(2)," ").concat(l.sign)),r.a.createElement(k.a,{variant:"body1",style:{}},"".concat(h," ").concat(l.sign))),r.a.createElement(P.a,{item:!0,xs:1,sm:1,md:1,lg:1},r.a.createElement(N.a,{"aria-label":"remove from cart",onClick:function(){c({type:"REMOVE_FROM_ORDER",payload:s})}},r.a.createElement(ce.a,{color:"primary"}))))};var ie=function(){var e=Object(n.useContext)(p).state.order;return r.a.createElement(r.a.Fragment,null,e.map((function(e,t){return r.a.createElement("div",{key:"order-".concat(t)},r.a.createElement(le,{order:e}),r.a.createElement(ae.a,null))})))};var se=function(){var e=Object(n.useContext)(p).state,t=e.currency,a=e.deliveryCost,c=t===m.RUB?a.RUB:t===m.USD?a.USD:a.EUR;return r.a.createElement(P.a,{container:!0,alignItems:"center",m:3},r.a.createElement(P.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0},r.a.createElement(k.a,{variant:"h6",style:{}},"Delivery cost")),r.a.createElement(P.a,{item:!0,xs:2,sm:2,md:2,lg:2},r.a.createElement(k.a,{variant:"h6",style:{}},"".concat(c," ").concat(t.sign))))};var ue=function(){var e=Object(n.useContext)(p).state,t=e.currency,a=e.deliveryCost,c=e.order.map((function(e){return e.count*e["price_".concat(t.name)]})).reduce((function(e,t){return e+t}));return c=(c+a[t.name]).toFixed(2),r.a.createElement(P.a,{container:!0,alignItems:"center",m:3},r.a.createElement(P.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0},r.a.createElement(k.a,{variant:"h6",style:{}},"Total SUM")),r.a.createElement(P.a,{item:!0,xs:2,sm:2,md:2,lg:2},r.a.createElement(k.a,{variant:"h6",style:{}},"".concat(c," ").concat(t.sign))))};var me=function(){var e=Object(n.useContext)(p),t=e.state,a=e.dispatch,c=t.order,o=t.catalogue,l=t.deliveryCost;return Object(n.useEffect)((function(){void 0===l&&C.get("/delivery_cost").then((function(e){a({type:"SET_DELIVERY_COST",payload:e})}))}),[l,a]),r.a.createElement(S.a,{m:3},0===c.length?r.a.createElement("div",null,"No order"):o.length>0?r.a.createElement(te.a,null,r.a.createElement(ie,null),void 0!==l&&r.a.createElement(se,null),r.a.createElement(ae.a,null),void 0!==l&&r.a.createElement(ue,null)):r.a.createElement("div",null,"Loading data..."))},de=Object(A.a)((function(e){return{root:{width:"100%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));function Ee(){var e=de(),t=r.a.useState(0),a=Object(i.a)(t,2),n=a[0],c=a[1],o=r.a.useState(new Set),l=Object(i.a)(o,2),s=l[0],u=l[1],m=["Check your order","Give us your address","Create an order"],d=function(e){return 1===e},E=function(e){return s.has(e)};return r.a.createElement("div",{className:e.root},r.a.createElement(X.a,{activeStep:n},m.map((function(e,t){var a={},n={};return d(t)&&(n.optional=r.a.createElement(k.a,{variant:"caption"},"Optional")),E(t)&&(a.completed=!1),r.a.createElement(Z.a,Object.assign({key:e},a),r.a.createElement(ee.a,n,e))}))),r.a.createElement("div",null,n===m.length?r.a.createElement("div",null,r.a.createElement(k.a,{className:e.instructions},"All steps completed - you're finished"),r.a.createElement(T.a,{onClick:function(){c(0)},className:e.button},"Reset")):r.a.createElement("div",null,function(e){switch(e){case 0:return r.a.createElement(me,null);case 1:return"What is an ad group anyways?";case 2:return"This is the bit I really care about!";default:return"Unknown step"}}(n),r.a.createElement("div",null,r.a.createElement(T.a,{disabled:0===n,onClick:function(){c((function(e){return e-1}))},className:e.button},"Back"),d(n)&&r.a.createElement(T.a,{variant:"contained",color:"primary",onClick:function(){if(!d(n))throw new Error("You can't skip a step that isn't optional.");c((function(e){return e+1})),u((function(e){var t=new Set(e.values());return t.add(n),t}))},className:e.button},"Skip"),r.a.createElement(T.a,{variant:"contained",color:"primary",onClick:function(){var e=s;E(n)&&(e=new Set(e.values())).delete(n),c((function(e){return e+1})),u(e)},className:e.button},n===m.length-1?"Finish":"Next")))))}a(79);var pe=function(){var e=Object(n.useContext)(p),t=e.state,a=e.dispatch,c=t.catalogue,o=t.isLoading;return Object(n.useEffect)((function(){0===c.length&&(a({type:"IS_LOADING",payload:!0}),C.get("/pizza_list").then((function(e){a({type:"SET_CATALOGUE",payload:e}),a({type:"IS_LOADING",payload:!1})})))}),[c,a]),r.a.createElement(S.a,null,r.a.createElement(J,null),o&&r.a.createElement(D.a,{color:"secondary"}),r.a.createElement(U.c,null,r.a.createElement(U.a,{exact:!0,path:"/"},r.a.createElement(Q,null)),r.a.createElement(U.a,{path:"/cart"},r.a.createElement(Ee,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(v,null,r.a.createElement(l.a,{basename:"/"},r.a.createElement(y.a,{theme:R},r.a.createElement(pe,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[67,1,2]]]);
//# sourceMappingURL=main.9b45e5f9.chunk.js.map